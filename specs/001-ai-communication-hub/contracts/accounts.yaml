paths:
  /accounts:
    get:
      summary: List connected accounts
      description: Get all connected platform accounts for the current user
      tags: [Accounts]
      responses:
        '200':
          description: List of connected accounts
          content:
            application/json:
              schema:
                type: object
                properties:
                  accounts:
                    type: array
                    items:
                      $ref: './schemas.yaml#/components/schemas/ConnectedAccount'
        '401':
          $ref: './schemas.yaml#/components/responses/Unauthorized'

  /accounts/{accountId}:
    get:
      summary: Get account details
      description: Fetch details of a specific connected account
      tags: [Accounts]
      parameters:
        - name: accountId
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        '200':
          description: Account details
          content:
            application/json:
              schema:
                $ref: './schemas.yaml#/components/schemas/ConnectedAccount'
        '401':
          $ref: './schemas.yaml#/components/responses/Unauthorized'
        '404':
          $ref: './schemas.yaml#/components/responses/NotFound'

    delete:
      summary: Disconnect account
      description: Remove connected account and revoke OAuth tokens
      tags: [Accounts]
      parameters:
        - name: accountId
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        '204':
          description: Account disconnected successfully
        '401':
          $ref: './schemas.yaml#/components/responses/Unauthorized'
        '404':
          $ref: './schemas.yaml#/components/responses/NotFound'

  /accounts/{accountId}/sync:
    post:
      summary: Trigger manual sync
      description: Force synchronization of messages from connected account
      tags: [Accounts]
      parameters:
        - name: accountId
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        '202':
          description: Sync initiated
          content:
            application/json:
              schema:
                type: object
                properties:
                  sync_id:
                    type: string
                    format: uuid
                  status:
                    type: string
                    enum: [queued, in_progress]
                  estimated_completion:
                    type: string
                    format: date-time
        '401':
          $ref: './schemas.yaml#/components/responses/Unauthorized'
        '404':
          $ref: './schemas.yaml#/components/responses/NotFound'
        '429':
          $ref: './schemas.yaml#/components/responses/RateLimitExceeded'
